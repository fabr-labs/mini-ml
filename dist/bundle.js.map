{"version":3,"file":"bundle.js","sources":["../src/microscope.js","../src/functions/createTemplate.js"],"sourcesContent":["import { createTemplate } from './functions/createTemplate.js';\n\nexport function microScope({ state: init }) {\n  const funcs = [];\n\n  const proxyHandler = {\n    set(target, property, value) {\n      target[property] = value;\n      funcs.forEach(func => func(target));\n      return true;\n    }\n  };\n\n  const proxy = new Proxy(init, proxyHandler);\n\n  return (strings, ...directives) => {\n    const template = createTemplate(strings.reduce((acc, val, i) =>\n      `${acc}${val}${directives[i] && directives[i].placeholder({ id: i, acc, val })}`, ''));\n    \n    directives.forEach((directive, id) => \n      directive.handler({ id, funcs, elem: template.querySelector(`[data-ms=\"${id}\"]`), proxy }));\n\n    proxy._ready = true;\n    return template;\n  }\n}\n","export function createTemplate(html) {\n  const container = document.createElement('div');\n  container.innerHTML = html; \n  return container.firstElementChild;\n}"],"names":["state","init","funcs","proxy","Proxy","set","target","property","value","forEach","func","strings","directives","template","html","container","document","createElement","innerHTML","firstElementChild","createTemplate","reduce","acc","val","i","placeholder","id","directive","handler","elem","querySelector","_ready"],"mappings":"uFAEO,UAAsBA,MAAOC,IAClC,MAAMC,EAAQ,GAURC,EAAQ,IAAIC,MAAMH,EARH,CACnBI,IAAG,CAACC,EAAQC,EAAUC,KACpBF,EAAOC,GAAYC,EACnBN,EAAMO,QAAQC,GAAQA,EAAKJ,KACpB,KAMX,MAAO,CAACK,KAAYC,KAClB,MAAMC,EChBH,SAAwBC,GAC7B,MAAMC,EAAYC,SAASC,cAAc,OAEzC,OADAF,EAAUG,UAAYJ,EACfC,EAAUI,kBDaEC,CAAeT,EAAQU,OAAO,CAACC,EAAKC,EAAKC,IACxD,GAAGF,IAAMC,IAAMX,EAAWY,IAAMZ,EAAWY,GAAGC,YAAY,CAAEC,GAAIF,EAAGF,IAAAA,EAAKC,IAAAA,MAAU,KAMpF,OAJAX,EAAWH,QAAQ,CAACkB,EAAWD,IAC7BC,EAAUC,QAAQ,CAAEF,GAAAA,EAAIxB,MAAAA,EAAO2B,KAAMhB,EAASiB,cAAc,aAAaJ,OAASvB,MAAAA,KAEpFA,EAAM4B,QAAS,EACRlB"}